# maxx-wp-automator

> A high-performance command-line diagnostic and automation tool designed to manage remote WordPress installations via SSH. This project demonstrates proficiency in **Python automation**, **Linux systems administration**, **Docker orchestration**, and **modern package management**.

## Features

* **Zero-Touch Bootstrap:** Automated WordPress installation (Core, Config, DB, and Admin) via SSH.
* **Environment Reset:** A "Clean" function to safely wipe remote files and reset the database.
* **Health Checks:** Real-time monitoring of disk usage and memory consumption.
* **Security Audits:** Scans for insecure (777) permissions.
* **Automated Maintenance:** Remote database optimization and core/plugin updates in a single command.
* **Disaster Recovery:** Automated database backups transferred locally via SFTP before updates.
* **Professional Reporting:** Generates a structured Markdown report (`logs/wp_report.md`) after every run.

## Tech Stack

* **Python 3.14+**
* **Package Management:** **Conda** (System isolation) + **uv** (High-speed resolution)
* **Infrastructure:** **Docker & Docker Compose** (Ubuntu 22.04 LAMP stack + MariaDB)
* **Orchestration:** **GNU Make** (Workflow automation)
* **SSH Protocol:** **Paramiko**
* **CMS Tooling:** **WP-CLI**

---

## Installation & Setup

### 1. Initialize the Python Environment

This project uses **Conda** for the Python 3.14 runtime and **uv** for library synchronization.

```bash
# Create and activate the environment
conda env create -f environment.yml
conda activate wp-automator

# Sync dependencies
uv pip install -r requirements.txt

```

### 2. Infrastructure Setup

You can use the provided **Makefile** to spin up the Docker containers and perform the initial WordPress bootstrap in one command:

```bash
make up

```

---

## Usage Guide

The **Makefile** provides a high-level interface for all common tasks. Manual CLI commands are provided below for granular control.

### Workflow Automation (via Make)

| Command | Action |
| --- | --- |
| `make up` | Builds containers, waits for SSH, and performs a fresh WP setup. |
| `make maint` | Optimizes the DB, creates a local backup, and updates all components. |
| `make check` | Runs a health check and generates a diagnostic report. |
| `make down` | Tears down the infrastructure and wipes the `logs/` directory. |
| `make all` | Executes a full lifecycle: Up → Check → Down. |

### Manual Execution (via Python CLI)

**Full Lifecycle Test:**

```bash
python main.py --clean --setup

```

**Maintenance Mode:**

```bash
python main.py --optimize --update

```

**Quick Diagnostic:**

```bash
python main.py

```

---

## Project Structure

To maintain a clean repository, all generated files are stored in a git-ignored `logs/` directory.

* **`main.py`**: The core automation logic using Paramiko and WP-CLI.
* **`Makefile`**: Short-hand aliases for infrastructure and script execution.
* **`logs/wp_report.md`**: Detailed diagnostic findings generated by the script.
* **`logs/local_wp_backup.sql`**: Remote database snapshots pulled via SFTP.
* **`environment.yml`**: Conda environment export for Python 3.14 reproducibility.

---

## Security & Architecture

* **Non-Root Execution:** The tool connects as `testuser`. The Docker environment utilizes a **GID bit** on `/var/www/html` to ensure file ownership remains consistent between the SSH user and the Apache web server.
* **Idempotency:** The `--setup` function verifies existing installations to prevent accidental data overwrites.
* **Modern Resolution:** Using `uv` ensures that even on experimental Python versions, dependencies are resolved with maximum stability.

---

### Project Impact

> Developed as a DevOps utility to eliminate manual WordPress audit tasks. By orchestrating SSH connections with WP-CLI, this tool ensures that remote environments remain secure, updated, and optimized with zero manual intervention.
